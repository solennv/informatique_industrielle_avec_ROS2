

<!DOCTYPE html>
<html class="writer-html5" lang="fr" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>L’outil pre-commit &mdash; Documentation Cours d&#39;Informatique Industrielle avec ROS2 1.0.0</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=fdcf8bf8" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=05dadb3a"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=30646c52"></script>
      <script src="../_static/translations.js?v=e6b791cb"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Pantographe de dessin robotisé avec Raspberry Pi et ROS2" href="../p00_pentograph_pencil_holder_with_rpi_and_dynamixel/p50s00_index.html" />
    <link rel="prev" title="Formatter automatiquement la documentation RestructuredText (RST)" href="p04s02_format_rst.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Cours d'Informatique Industrielle avec ROS2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Informatique Industrielle &amp; ROS2</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../c00_introduction/p00s00_index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../c01_create_and_publish_doc/p01s00_index.html">Premier projet &amp; doc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../c02_first_ros2_project_pimped/p02s00_index.html">Tutoriel ROS2 épicé</a></li>
<li class="toctree-l1"><a class="reference internal" href="../c03_test_your_code/p03s00_index.html">Tester le code</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="p04s00_index.html">Les outils nécessaires pour collaborer entre codeurs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="p04s01_format_your_code.html">Formater automatiquement le code</a></li>
<li class="toctree-l2"><a class="reference internal" href="p04s01_format_your_code.html#conventions-de-codage">Conventions de codage</a></li>
<li class="toctree-l2"><a class="reference internal" href="p04s02_format_rst.html">Formatter automatiquement la documentation RestructuredText (RST)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">L’outil pre-commit</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#a-quoi-sert-l-outil-pre-commit">À quoi sert l’outil pre-commit ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation-de-pre-commit">Installation de pre-commit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-de-pre-commit">Configuration de pre-commit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exemple-d-utilisation-pour-restructuredtext">Exemple d’utilisation pour restructuredtext</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commiter-en-urgence">Commiter en urgence</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Travaux Pratiques</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../p00_pentograph_pencil_holder_with_rpi_and_dynamixel/p50s00_index.html">Pantographe de dessin robotisé avec Raspberry Pi et ROS2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../p01_rpi_ubuntu_as_a_ros2_robotic_platform/p51s00_index.html">Ubuntu &amp; RPi &amp; ROS2</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cours d'Informatique Industrielle avec ROS2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="p04s00_index.html">Les outils nécessaires pour collaborer entre codeurs</a></li>
      <li class="breadcrumb-item active">L’outil pre-commit</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/c04_collaborate_with_coders/p04s10_precommit.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="l-outil-pre-commit">
<h1>L’outil pre-commit<a class="headerlink" href="#l-outil-pre-commit" title="Lien vers cette rubrique"></a></h1>
<section id="a-quoi-sert-l-outil-pre-commit">
<h2>À quoi sert l’outil pre-commit ?<a class="headerlink" href="#a-quoi-sert-l-outil-pre-commit" title="Lien vers cette rubrique"></a></h2>
<p>L’outil pre-commit permet de vérifier que le code est conforme à certaines règles avant de le valider.</p>
</section>
<section id="installation-de-pre-commit">
<h2>Installation de pre-commit<a class="headerlink" href="#installation-de-pre-commit" title="Lien vers cette rubrique"></a></h2>
<p>Pre-commit est un outil écrit en python.
Pre-commit est un outil majeur, qui mérite d’être installé en global sur la machine.
Pour installer pre-commit, il suffit donc de lancer la commande suivante :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>pre-commit
</pre></div>
</div>
</section>
<section id="configuration-de-pre-commit">
<h2>Configuration de pre-commit<a class="headerlink" href="#configuration-de-pre-commit" title="Lien vers cette rubrique"></a></h2>
<p>Pre-commit utilise un fichier de configuration <code class="docutils literal notranslate"><span class="pre">.pre-commit-config.yaml</span></code> pour définir les règles à appliquer.</p>
</section>
<section id="exemple-d-utilisation-pour-restructuredtext">
<h2>Exemple d’utilisation pour restructuredtext<a class="headerlink" href="#exemple-d-utilisation-pour-restructuredtext" title="Lien vers cette rubrique"></a></h2>
</section>
<section id="commiter-en-urgence">
<h2>Commiter en urgence<a class="headerlink" href="#commiter-en-urgence" title="Lien vers cette rubrique"></a></h2>
<p>Commiter en urgence n’est pas une bonne pratique. Cependant, il est parfois nécessaire de commiter rapidement.
Dans ce cas toujours le faire sur une branche temporaire afin de ne pas polluer la branche principale.
Il faut prendre en compte que dans ce cas, il faudra probablement ré-écrire l’historique des commits pour que ce commit «intermédiaire» n’apparaisse pas comme tel et que l’historique reste simple, clair et compréhensible.</p>
<p>Il est possible de commiter en urgence en utilisant l’option <code class="docutils literal notranslate"><span class="pre">--no-verify</span></code>.
Il est également fortement recommandé d’ajouter dans le message de commit :
#. un texte explicit indiquant que c’est un commit temporaire (par exemple <code class="docutils literal notranslate"><span class="pre">[WIP]</span></code> pour Work In Progress),
#. un texte explicatif sur l’état du code,
#. le mot clé <code class="docutils literal notranslate"><span class="pre">[skip</span> <span class="pre">ci]</span></code> pour éviter de déclencher des actions automatiques (comme des tests) sur ce commit.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;[WIP][skip ci] 70% du refactoring effectué suite au bug 356&quot;</span><span class="w"> </span>--no-verify
</pre></div>
</div>
<p>Ainsi il sera possible de faire un test automatique sur la branche principale pour vérifier que jamais de commit avec les mots clés <code class="docutils literal notranslate"><span class="pre">[WIP]</span></code> ou <code class="docutils literal notranslate"><span class="pre">[skip</span> <span class="pre">ci]</span></code> n’ont été mergés.</p>
<p>Cela permettra un contrôle accru sur la qualité du code de la branche principale et de toute branche considérée comme majeure.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="p04s02_format_rst.html" class="btn btn-neutral float-left" title="Formatter automatiquement la documentation RestructuredText (RST)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="../p00_pentograph_pencil_holder_with_rpi_and_dynamixel/p50s00_index.html" class="btn btn-neutral float-right" title="Pantographe de dessin robotisé avec Raspberry Pi et ROS2" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Manuel YGUEL.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>